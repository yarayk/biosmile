import 'package:flutter/material.dart';
import 'package:flutter_svg/flutter_svg.dart';

class SvgButton extends StatelessWidget {
  final double width;
  final double height;
  final VoidCallback onPressed;
  final bool isLoading;

  const SvgButton({
    super.key,
    required this.width,
    required this.height,
    required this.onPressed,
    this.isLoading = false,
  });

  // Вставь сюда твой полный SVG
  final String svgString = '''
<svg width="375" height="101" viewBox="0 0 375 101" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_d_5054_38063)">
<rect x="16" y="20" width="343" height="51" rx="25.5" fill="#81C784" shape-rendering="crispEdges"/>
<path d="M165.211 51V49.4375H168.562C169.307 49.4375 169.872 49.2865 170.258 48.9844C170.643 48.6771 170.836 48.237 170.836 47.6641V47.6484C170.836 47.2682 170.747 46.9479 170.57 46.6875C170.393 46.4271 170.128 46.2318 169.773 46.1016C169.424 45.9714 168.992 45.9062 168.477 45.9062H165.211V44.4766H168.164C168.878 44.4766 169.419 44.3411 169.789 44.0703C170.164 43.7995 170.352 43.4089 170.352 42.8984V42.8828C170.352 42.3828 170.182 41.9922 169.844 41.7109C169.505 41.4297 169.031 41.2891 168.422 41.2891H165.211V39.7266H168.906C169.625 39.7266 170.24 39.8411 170.75 40.0703C171.26 40.2943 171.654 40.6172 171.93 41.0391C172.206 41.4557 172.344 41.9531 172.344 42.5312V42.5469C172.344 42.9427 172.253 43.3125 172.07 43.6562C171.893 44 171.654 44.2865 171.352 44.5156C171.055 44.7448 170.716 44.8906 170.336 44.9531V45.0938C170.841 45.1406 171.284 45.2865 171.664 45.5312C172.049 45.7708 172.349 46.0859 172.562 46.4766C172.781 46.8672 172.891 47.3047 172.891 47.7891V47.8047C172.891 48.4609 172.734 49.0286 172.422 49.5078C172.115 49.987 171.672 50.3568 171.094 50.6172C170.516 50.8724 169.826 51 169.023 51H165.211ZM164.203 51V39.7266H166.219V51H164.203ZM178.734 51.1719C177.885 51.1719 177.154 50.9948 176.539 50.6406C175.924 50.2812 175.451 49.7708 175.117 49.1094C174.789 48.4479 174.625 47.6562 174.625 46.7344V46.7188C174.625 45.8073 174.792 45.0208 175.125 44.3594C175.458 43.6927 175.93 43.1823 176.539 42.8281C177.154 42.474 177.885 42.2969 178.734 42.2969C179.583 42.2969 180.312 42.474 180.922 42.8281C181.536 43.1823 182.01 43.6901 182.344 44.3516C182.677 45.013 182.844 45.8021 182.844 46.7188V46.7344C182.844 47.6562 182.677 48.4479 182.344 49.1094C182.016 49.7708 181.544 50.2812 180.93 50.6406C180.32 50.9948 179.589 51.1719 178.734 51.1719ZM178.734 49.5938C179.182 49.5938 179.562 49.4818 179.875 49.2578C180.193 49.0286 180.435 48.7031 180.602 48.2812C180.768 47.8542 180.852 47.3411 180.852 46.7422V46.7266C180.852 46.1224 180.768 45.6094 180.602 45.1875C180.435 44.7604 180.193 44.4349 179.875 44.2109C179.562 43.9818 179.182 43.8672 178.734 43.8672C178.286 43.8672 177.904 43.9818 177.586 44.2109C177.268 44.4349 177.026 44.7604 176.859 45.1875C176.693 45.6094 176.609 46.1224 176.609 46.7266V46.7422C176.609 47.3411 176.693 47.8542 176.859 48.2812C177.026 48.7083 177.266 49.0339 177.578 49.2578C177.896 49.4818 178.281 49.5938 178.734 49.5938ZM184.945 51V42.4609H186.867V48.1797H187.875L186.547 48.9297L190.625 42.4609H192.539V51H190.625V45.25H189.617L190.93 44.4922L186.867 51H184.945ZM188.75 41.2969C188.177 41.2969 187.674 41.1823 187.242 40.9531C186.815 40.724 186.482 40.4089 186.242 40.0078C186.003 39.6068 185.883 39.1484 185.883 38.6328H187.414C187.419 39.0547 187.542 39.4167 187.781 39.7188C188.021 40.0156 188.344 40.1641 188.75 40.1641C189.167 40.1641 189.492 40.0156 189.727 39.7188C189.961 39.4167 190.081 39.0547 190.086 38.6328H191.617C191.617 39.1484 191.497 39.6068 191.258 40.0078C191.018 40.4089 190.682 40.724 190.25 40.9531C189.823 41.1823 189.323 41.2969 188.75 41.2969ZM201.578 42.4609V43.9688H198.945V51H197V43.9688H194.375V42.4609H201.578ZM203.414 51V42.4609H205.336V48.1797H206.344L205.016 48.9297L209.094 42.4609H211.008V51H209.094V45.25H208.086L209.398 44.4922L205.336 51H203.414Z" fill="white"/>
</g>
<defs>
<filter id="filter0_d_5054_38063" x="-8.7" y="0.299999" width="392.4" height="100.4" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="5"/>
<feGaussianBlur stdDeviation="12.35"/>
<feComposite in2="hardAlpha" operator="out"/>
<feColorMatrix type="matrix" values="0 0 0 0 0.505882 0 0 0 0 0.780392 0 0 0 0 0.517647 0 0 0 0.5 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5054_38063"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5054_38063" result="shape"/>
</filter>
</defs>
</svg>
''';

  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: isLoading ? null : onPressed,
      child: Stack(
        alignment: Alignment.center,
        children: [
          SvgPicture.string(
            svgString,
            width: width,
            height: height,
            fit: BoxFit.fill, // <-- масштабирование под контейнер
          ),
          if (isLoading)
            SizedBox(
              width: width * 0.3,
              height: width * 0.3,
              child: const CircularProgressIndicator(
                strokeWidth: 2,
                valueColor: AlwaysStoppedAnimation<Color>(Colors.white),
              ),
            ),
        ],
      ),
    );
  }
}
